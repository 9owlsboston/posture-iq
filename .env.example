# PostureIQ — Configuration Template
#
# Copy this file to .env and fill in the values:
#   cp .env.example .env
#
# This file is loaded by pydantic-settings (src/agent/config.py).
# NEVER commit .env to source control — .gitignore protects it.

# ─── Azure Identity (Tenant & Subscription) ───────────────
# These are public identifiers, not secrets.
AZURE_TENANT_ID=<your-tenant-id>
AZURE_SUBSCRIPTION_ID=<your-subscription-id>

# ─── App Registration (PostureIQ - ME5 Security Assessment) ─
# Used for Graph API OAuth2 flow and OIDC CI/CD.
# Create: az ad app create --display-name "PostureIQ - ME5 Security Assessment"
AZURE_CLIENT_ID=<your-app-registration-client-id>
# Client secret for Graph API token exchange.
# Generate: az ad app credential reset --id $AZURE_CLIENT_ID --years 1
# Production: stored in Key Vault, accessed via Managed Identity — not in env vars.
AZURE_CLIENT_SECRET=<your-client-secret>

# ─── Microsoft Graph API Scopes ───────────────────────────
# Delegated, read-only, least-privilege. All require admin consent.
# Grant: az ad app permission admin-consent --id $AZURE_CLIENT_ID
GRAPH_SCOPES=SecurityEvents.Read.All,SecurityActions.Read.All,InformationProtection.Read.All,Policy.Read.All,Reports.Read.All

# ─── Azure OpenAI ──────────────────────────────────────────
AZURE_OPENAI_ENDPOINT=https://<your-resource>.openai.azure.com/
AZURE_OPENAI_DEPLOYMENT=gpt-4o
AZURE_OPENAI_API_VERSION=2024-02-01
# Leave blank → uses Managed Identity (recommended in production)
AZURE_OPENAI_API_KEY=

# ─── Azure AI Content Safety ──────────────────────────────
AZURE_CONTENT_SAFETY_ENDPOINT=https://<your-resource>.cognitiveservices.azure.com/
# Leave blank → uses Managed Identity (recommended in production)
AZURE_CONTENT_SAFETY_KEY=

# ─── Azure Application Insights ──────────────────────────
APPLICATIONINSIGHTS_CONNECTION_STRING=

# ─── Azure Key Vault ──────────────────────────────────────
AZURE_KEYVAULT_URL=https://<your-vault>.vault.azure.net/

# ─── Azure Container Registry ────────────────────────────
ACR_LOGIN_SERVER=<your-acr>.azurecr.io

# ─── Container App & Managed Identity ────────────────────
CONTAINER_APP_NAME=<your-container-app>
CONTAINER_APP_URL=https://<your-app>.<region>.azurecontainerapps.io
MANAGED_IDENTITY_CLIENT_ID=<your-managed-identity-client-id>
RESOURCE_GROUP=<your-resource-group>

# ─── App Settings ─────────────────────────────────────────
LOG_LEVEL=INFO
ENVIRONMENT=development
PORT=8000
